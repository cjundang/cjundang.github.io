<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Markdown Slide Viewer</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js/dist/theme/black.css">
  <style>
    body { margin: 0; background: #111; }
    #upload-box { 
      position: absolute; 
      top: 10px; left: 10px; 
      z-index: 1000; 
      background: rgba(0,0,0,0.7); 
      padding: 10px; 
      border-radius: 8px; 
    }
    input[type="file"] { color: white; }
  </style>
</head>
<body>

  <!-- Upload box -->
  <div id="upload-box">
    <label style="color:white;">Upload Markdown file:</label>
    <input type="file" id="fileInput" accept=".md,.markdown">
  </div>

  <!-- Reveal.js container -->
  <div class="reveal">
    <div class="slides" id="slides-container">
      <!-- Slides will be injected here -->
    </div>
  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/reveal.js/dist/reveal.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/reveal.js/plugin/markdown/markdown.js"></script>

  <script>
    // Initialize Reveal.js (empty at start)
    Reveal.initialize({
      hash: true,
      plugins: [ RevealMarkdown ]
    });

    // Handle file upload
    document.getElementById('fileInput').addEventListener('change', function(event) {
      const file = event.target.files[0];
      if (file) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const content = e.target.result;

          // Insert markdown into slides container
          document.getElementById('slides-container').innerHTML = `
            <section data-markdown>
              <textarea data-template>
              ${content}
              </textarea>
            </section>
          `;

          // Re-initialize Reveal after loading new content
          Reveal.sync();
        };
        reader.readAsText(file);
      }
    });
  </script>
</body>
</html>
